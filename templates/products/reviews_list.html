{% load static %}
{% for review in reviews %}
<div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow">
    <!-- Review Header -->
    <div class="flex items-start justify-between mb-4">
        <div class="flex-1">
            <div class="flex items-center gap-2 mb-2">
                <span class="font-semibold text-gray-900">{{ review.user.get_full_name|default:review.user.username }}</span>
            </div>
            <div class="flex items-center gap-3">
                <div class="flex text-yellow-400 product-rating-stars" data-rating="{{ review.rating }}"></div>
                <span class="text-sm text-gray-500">{{ review.created_at|date:"F d, Y" }}</span>
            </div>
        </div>
        
        <!-- Edit/Delete buttons for user's own review -->
        {% if user.is_authenticated and user == review.user %}
        <div class="flex items-center gap-3 ml-4 flex-shrink-0">
            <a href="{% url 'products:submit_review' product.sku %}" 
               class="text-blue-600 hover:text-blue-700 hover:underline text-sm font-medium whitespace-nowrap">Edit</a>
            <form method="post" action="{% url 'products:delete_review' review.id %}" 
                  onsubmit="return confirm('Are you sure you want to delete this review?');" class="inline m-0">
                {% csrf_token %}
                <button type="submit" class="text-red-600 hover:text-red-700 hover:underline text-sm font-medium whitespace-nowrap">Delete</button>
            </form>
        </div>
        {% endif %}
    </div>
    
    <!-- Review Content -->
    <h3 class="font-semibold text-lg text-gray-900 mb-2">{{ review.title }}</h3>
    <p class="text-gray-700 leading-relaxed">{{ review.comment }}</p>
</div>
{% endfor %}

